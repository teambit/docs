---
id: react-native
title: React Native
slug: /aspects/react-native
description: A Bit development environment for React Native Components
labels: ['react-native', 'environment', 'env', 'aspect', 'extension']
---

The built-in React Native Component Development Environment is a concrete composition of the [Env Aspect](/aspects/envs). It compose different tools and configs that fit practices implemented in [Create React Native App](https://create-react-app.dev). Use it when getting started with React Native components with Bit and later as a base for any future customization of your React-Native-based workflow.

React Native environment is composed out of the base [React Environment](aspects/react) with some specific configuration overrides.

## Use React Native environment

To use this environment for your components, add it to any of the `variants` in your `workspace.jsonc` file as follows:

```json title="workspace.jsonc"
{
  "teambit.workspace/variants": {
    "[some]/[path]": {
      "teambit.react/react-native": {}
    }
  }
}
```

## Create React Native components

React implements several component templates:

* `reactnative-component` a bsaic React UI component.
* `react-hook` a basic React Hook component.
* `reactnative-extension` boilerplate for customizing configuration.

Use any of these templates with the `bit create` command:

```sh
bit create <template name> [components...]
```

## Runtime (framework) dependencies

Similar to many Frontend frameworks React Native must have a singleton instance in your app's runtime. When building reuseable components we need to adhere to that and have `react` and `react-native` set as `peerDependencies`, thus allowing the consuming app to determine runtime version. React environment implements this via the **Dependencies** service which is used to override [dependency-resolver](/aspects/dependency-resolver) and set your prefered dependencies.  
It is recomended to for you to extend the base React environment and define a semantic version rule to fit your current techstack and guidelines for reuseable React components.

## Default Configuration and Services

Node, like all over Environments must implement a set of Service Handlers. For each service, Node compose a different tool and config by default.

> Node is a composition of the React environment with some specific modifications. Most of the links here direct to the actual configs in React environment.

| Service     | Aspect     | Base Configuration  |
| ----------- | ------------- | ----- |
| Compilation | [TypeScript](/aspects/typescript) | [tsconfig.json](https://bit.dev/teambit/react/react/~code/typescript/tsconfig.json) |
| Testing | **Jest** | [jest.config.js](https://bit.dev/teambit/react/react-native/~code/jest/jest.config.js) |
| Linting | **ESLint** | [eslintrc.js](https://bit.dev/teambit/react/react/~code/eslint/eslintrc.js) |
| DevServer | **Webpack** | [webpack.config.preview.dev.ts](https://bit.dev/teambit/react/react-native/~code/webpack/webpack.config.js) |
| Preview (simulation) | **Webpack** | [webpack.config.preview.ts](https://bit.dev/teambit/react/react-native/~code/webpack/webpack.config.js) |
| Package | **PKG** | Base `package.json` props from [TypeScript Aspect](https://bit.dev/teambit/typescript/typescript/~code/typescript.main.runtime.ts) |
| Bundling | **Webpack** | [webpack.config.preview.ts](https://bit.dev/teambit/react/react-native/~code/webpack/webpack.config.js) |
| Documentation | *Core implementation* | [Docs template](https://bit.dev/teambit/react/react/~code/docs/index.tsx) |
| Build pipeline | [Builder](aspects/builder) | [Build pipeline](https://bit.dev/teambit/react/react/~code/react.env.ts) |
| Dependencies | *Core implementation*| [Env-dependencies](https://bit.dev/teambit/react/react-native/~code/react-native.main.runtime.ts) |

### Additional services

Each environment may compose additional services as needed to improve developer experience. React environment is no different and allows for the following features:

| Service     | Aspect     | Base Configuration  |
| ----------- | ------------- | ----- |
| Component Generator | [Generator](/aspects/generator) | [example template](https://bit.dev/react/react-native/~code/templates/reactnative-component.ts) |

### Customizing configuration

To simplify the process of extending the base Node environment we implemented a template for you to start with.  
This creates a base mock for a customized extension where you can quickly override any of the default configurations for the composed tools and compose different aspects to replace any of the base tools.

#### Create an extension

```shell
bit create node-extension my-node-extension
```

This template comprise of several files. In this case our main focus will be the file ends with `*.extension.ts`. It may look similar to this snippet:

```typescript title="my-react-extension.extension.ts"
import { EnvsMain, EnvsAspect } from '@teambit/envs'
import { ReactNativeAspect, ReactNativeMain } from '@teambit/react-native'

export class MyReactNativeExtension {
  constructor(private reactNative: ReactNativeMain) {}

  static dependencies: any = [EnvsAspect, ReactNativeAspect]

  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const myReactNativeEnv = reactNative.compose([
      /*
        Environment customization and trnaformation code goes here
      */
    ])

    envs.registerEnv(myReactNativeEnv)

    return new MyReactNativeExtension(node)
  }
}
```

#### Using Transformers to customize configuration

Similar to all Environments, Node implements a set of APIs you can use to merge you prefered configuration with its defaults. In case of a conflict, your config will override the default.  
These APIs are called **transformers** and they all start with the `override` pre-fix. [Available transformers](#transformers-api-docs).

To override any specific configuraiton it's recommended to create a config file for the specific tool and import it to any of the **transformers**. For example:

```typescript {4,13} title="Customized TypeScript configuration"
import { EnvsMain, EnvsAspect } from '@teambit/envs'
import { ReactNativeAspect, ReactNativeMain } from '@teambit/node'
const tsconfig = require('./typescript/tsconfig.json');

export class MyReactNativeExtension {
  constructor(private reactNative: ReactNativeMain) {}

  static dependencies: any = [EnvsAspect, ReactNativeAspect]

  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const myReactNativeEnv = reactNative.compose([
      reactNative.overrideTsConfig(tsconfig),
    ])

    envs.registerEnv(myReactNativeEnv)

    return new MyReactNativeExtension(node)
  }
}
```

We urge you to explore the different `override` transformers to define your base configuration for your needs.

## Transformers API docs

Use these APIs to customize React environment default configuration with your extention. [React more here](#customizing-configuration).

#### `overrideTsConfig(tsconfig: TsConfigSourceFile): EnvTransformer`

Merge the environment's default TypeScript configurations with a new ([tsconfig.json](https://www.typescriptlang.org/handbook/tsconfig-json.html)) configuration file.

```ts
// ...
const tsconfig = require('./typescript/tsconfig.json');
export class ReactNativeExtension {
// ...

  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const newNodeEnv = reactNative.compose([
      reactNative.overrideTsConfig(tsconfig)
    ]);
}
// ...
```

#### `overridePreviewConfig(config: Configuration): EnvTransformer`

Merge the Webpack configurations for the 'Preview' environment service, with a new ([webpack.config.js](https://webpack.js.org/configuration/)) configuration file.

```ts
// ...
const webpackConfig = require('./webpack/webpack.config');
export class ReactNativeExtension {
// ...
  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const newNodeEnv = reactNative.compose([
      reactNative.overridePreviewConfig(webpackConfig)
    ]);
}
// ...
```

#### `overrideDevServerConfig(config: Configuration): EnvTransformer`

Merge the Webpack configurations for the 'DevServer' environment service, with a new ([webpack.config.js](https://webpack.js.org/configuration/)) configuration file.

```ts
// ...
const webpackConfig = require('./webpack/webpack.config');
export class ReactNativeExtension {
// ...
  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const newNodeEnv = reactNative.compose([
      reactNative.overrideDevServerConfig(webpackConfig)
    ]);
}
// ...
```

#### `overrideJestConfig(jestConfigPath: string): EnvTransformer`

This method receives a path (as a string) to a configuration file . Overrides the default configurations for the Jest test runner with a new ([jest.config](https://jestjs.io/en/configuration)) configuration file. This is done by passing the _path_ to the file as an argument.

```ts
// ...
export class ReactNativeExtension {
// ...
  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const newNodeEnv = reactNative.compose([
      reactNative.overrideJestConfig(require.resolve('./jest/jest.config'))
    ]);
}
// ...
```

#### `overrideBuildPipe(tasks: BuildTask[]): EnvTransformer`

This method receives an array of Bit tasks. It overrides the build pipeline of a component (initiated either on a `bit tag` or `bit build` command).

```ts
// ...
// Import the task
import { CustomTask } from './custom.task'
export class CustomNode {
  // ...
  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    // Get the environment's default build pipeline using the 'getBuildPipe' service handler
    const nodePipe = reactNative.env.getBuildPipe()
    // Add the custom task to the end of the build tasks sequence.
    const tasks = [...nodePipe, new CustomTask()]
    const newNodeEnv = reactNative.compose([node.overrideBuildPipe(tasks)])
    // ...
  }
}
```

#### `overrideDependencies(dependencyPolicy: DependenciesPolicy): EnvTransformer`

This method receives a Bit dependency-policy object. It overrides the default dependency policy for components using this environment.  
Each key-value pair in a dependency-policy object signifies the package and the version to be used. It also uses the `-` notation to signify a module should not be defined as a dependency of a certain type (dev, peer or standard).

```js
// ...
const newDependencies = {
  devDependencies: {
    '@types/jest': '~26.0.9'
  }
}

export class CustomNode {
  // ...
  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const newNodeEnv = reactNative.compose([
      reactNative.overrideDependencies(newDependencies)
    ])
    // ...
  }
}
```

> The above example shows the 'Node' library being removed as a (runtime) dependency and added as a peer dependency.

#### `overridePackageJsonProps(props: PackageJsonProps): EnvTransformer`

Overrides the default properties added to the `package.json` file of every package generated from components using this environment.

```ts
// ...
const newPackageProps = {
  main: 'dist/{main}.js',
  types: '{main}.ts'
}

export class CustomNode {
  // ...
  static async provider([envs, reactNative]: [EnvsMain, ReactNativeMain]) {
    const newNodeEnv = reactNative.compose([
      reactNative.overridePackageJsonProps(newPackageProps)
    ])
    // ...
  }
}
```

